[tox]
isolated_build = true
envlist = py312, format, lint, test
skipsdist = True

[gh-actions]
python =
    3.12: py312, build, test

[testenv:test]
allowlist_externals = pytest, sh
deps =
    pytest
    pytest-asyncio
extras =
    test
passenv = *
setenv =
    PYTHONPATH = {toxinidir}
    PYTHONWARNINGS = ignore
commands = 
    sh ./scripts/run_all_tests.sh

[testenv:format]
allowlist_externals =
    isort
    black
extras =
    test
commands =
    isort .
    black .

[testenv:lint]
allowlist_externals =
    flake8 
    mypy 
extras =
    test
commands =
    flake8 core/src core/tests
    mypy core/src core/tests

[flake8]
max-line-length = 160
max-complexity = 18
ignore =
  E203,
  E266,
  E701,
  E704,
  W503,
  D100,
  D101,
  D102,
  D104,
  D105,
  D106,
  D107,
  D200,
  D202,
  D205,
  D212,
  D415,
docstring-convention = "google"
